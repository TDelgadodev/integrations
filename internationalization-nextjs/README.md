# Internacionalización en Next.js con `next-intl`

Este proyecto es un ejemplo de cómo implementar la internacionalización en una aplicación Next.js usando `next-intl`. La internacionalización permite que tu aplicación soporte múltiples idiomas y se adapte a los usuarios de diferentes regiones.

## Requisitos

- Node.js >= 12.x
- Next.js >= 10.x

## Instalación

Para comenzar, sigue estos pasos:

1. Clona el repositorio:

   ```bash
   git clone https://github.com/tu-usuario/proyectos-integraciones.git
   cd proyectos-integraciones/internationalization-nextjs
   ```

2. Instala las dependencias:

    ```bash
    npm install
    ```

**Ejecución**
Para ejecutar el proyecto en modo desarrollo, utiliza el siguiente comando:

```bash
npm run dev
```

Abre <http://localhost:3000> en tu navegador para ver la aplicación en acción.

**Estructura del Proyecto**

```bash
internationalization-nextjs/
├── .next/
├── messages/
│   ├── en.json
│   ├── es.json
├── node_modules/
├── public/
├── src/
│   ├── app/
│   │   ├── [locale]/
│   │   │   ├── globals.css
│   │   │   ├── layout.tsx
│   │   │   ├── page.tsx
│   │   ├── layout.tsx
│   │   ├── not-found.tsx
│   │   ├── page.tsx
│   ├── components/
│   │   ├── Footer.tsx
│   │   ├── Header.tsx
│   │   ├── locale-switcher.tsx
│   ├── i18n.ts
│   ├── middleware.ts
├── .eslintrc.json
├── .gitignore
├── next-env.d.ts
├── next.config.js
├── package-lock.json
├── package.json
├── postcss.config.mjs
├── README.md
├── tailwind.config.ts
├── tsconfig.json
```

## Archivos Clave

- messages/: Carpeta que contiene los archivos de traducción para cada idioma (en.json y es.json).
- src/app/[locale]/: Carpeta que contiene archivos relacionados con el manejo de locales.
- src/components/: Componentes reutilizables de la aplicación.
- src/i18n.ts: Archivo de configuración de next-intl.
- src/middleware.ts: Middleware para manejar la localización.

### Configuración de next-intl

**Configuración Inicial**
En src/app/[locale]/layout.tsx, configura el proveedor de next-intl:

```typescript
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import Header from '@/components/Header';
import Footer from '@/components/Footer';

const inter = Inter({ subsets: ['latin'] });

export const metadata: Metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
};

interface RootLayoutProps {
  children: React.ReactNode;
  params: {
    locale: string;
  };
}

export default function RootLayout({
  children,
  params: { locale },
}: Readonly<RootLayoutProps>) {
  return (
    <html lang={locale}>
      <head>
        <title>Create Next App</title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" />
      </head>
      <body className={`${inter.className} bg-gray-100 text-gray-800`}>
        <div className='flex flex-col min-h-screen'>
          <Header />
          <main className='flex-grow mt-20 max-w-4xl mx-auto'>{children}</main>
          <Footer />
        </div>
      </body>
    </html>
  );
}
```

### Archivos de Traducción

Crea archivos de traducción para cada idioma en messages/:
messages/en.json:

```json
{
  "IndexPage": {
    "title": "next-intl example",
    "description": "Welcome to the Next.js Internationalization (i18n) example! This demo showcases the power of the App Router and how to manage multilingual content seamlessly using next-intl."
  },
  "NotFoundPage": {
    "title": "Page Not Found",
    "description": "Oops! It seems like you've stumbled upon a page that doesn't exist. Don't worry, our internationalization magic is still hard at work on other parts of the app. Feel free to navigate back to explore more!"
  },
  "Navigation": {
    "home": "Home"
  },
  "Footer": {
    "copyright": "© 2024 Your App. All rights reserved."
  }
}
```

messages/es.json:

```json
{
  "IndexPage": {
    "title": "Ejemplo de next-intl",
    "description": "¡Bienvenido al ejemplo de Internacionalización (i18n) de Next.js! Esta demostración muestra el poder del enrutador de la aplicación y cómo administrar contenido multilingüe de manera perfecta utilizando next-intl."
  },
  "NotFoundPage": {
    "title": "Página no encontrada",
    "description": "¡Vaya! Parece que has encontrado una página que no existe. No te preocupes, nuestra magia de internacionalización sigue funcionando en otras partes de la aplicación. ¡Siéntete libre de navegar para explorar más!"
  },
  "Navigation": {
    "home": "Inicio"
  },
  "Footer": {
    "copyright": "© 2024 Tu Aplicación. Todos los derechos reservados."
  }
}
```

### Uso de Traducciones en Componentes

En los componentes, usa useTranslations para acceder a las traducciones:

src/components/Header.tsx

```tsx
Copiar código
import { useTranslations } from 'next-intl';
import Link from 'next/link';
import LocaleSwitcher from './locale-switcher';

export default function Header() {
  const t = useTranslations('Navigation');

  return (
    <header className='bg-gray-800 text-white p-4'>
      <div className='flex items-center justify-between max-w-4xl mx-auto'>
        <Link href='/' className='text-lg font-bold'>{t('home')}</Link>
        <LocaleSwitcher />
      </div>
    </header>
  );
}
```

src/components/Footer.tsx:

```tsx
import { useTranslations } from 'next-intl';

export default function Footer() {
  const t = useTranslations('Footer');

  return (
    <footer className='bg-gray-800 text-white text-center py-4'>
      <p className='text-sm'>{t('copyright')}</p>
    </footer>
  );
}
```

### Cambiando Idiomas
Implementa un conmutador de idiomas en el componente locale-switcher.tsx:

src/components/locale-switcher.tsx:

```tsx
"use client";

import { useLocale } from 'next-intl';
import { useRouter } from 'next/navigation';
import { ChangeEvent, useTransition } from 'react';

export default function LocaleSwitcher() {
  const [isPending, startTransition] = useTransition();
  const router = useRouter();
  const localActive = useLocale();

  const onSelectChange = (e: ChangeEvent<HTMLSelectElement>) => {
    const nextLocale = e.target.value;
    startTransition(() => {
      router.replace(`/${nextLocale}`);
    });
  };

  return (
    <div className='relative inline-block'>
      <label htmlFor="locale-select" className='sr-only'>Change Language</label>
      <select
        id="locale-select"
        defaultValue={localActive}
        className='border-2 rounded px-5 py-2 bg-white text-gray-800 appearance-none'
        onChange={onSelectChange}
        disabled={isPending}
      >
        <option value='en'>English</option>
        <option value='es'>Español</option>
      </select>
      <svg className='absolute top-1/2 right-4 transform -translate-y-1/2 w-4 h-4 pointer-events-none' fill="currentColor" viewBox="0 0 20 20">
        <path fillRule="evenodd" d="M10 12a2 2 0 100-4 2 2 0 000 4z" clipRule="evenodd" />
        <path fillRule="evenodd" d="M14.707 8.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414-1.414l-3-3zM5.293 8.293a1 1 0 111.414-1.414l-3 3a1 1 0 01-1.414-1.414l3-3z" clipRule="evenodd" />
      </svg>
    </div>
  );
}
```

### Middleware para Redirección Automática

Configura el middleware en middleware.ts:

src/middleware.ts

```ts
import createMiddleware from 'next-intl/middleware';

export default createMiddleware({
  locales: ['en', 'es'],
  defaultLocale: 'en'
});

export const config = {
  matcher: ['/', '/(es|en)/:path*']
};
```

### Configuración de i18n

Configura next-intl en i18n.ts:

src/i18n.ts:

```ts
import { notFound } from 'next/navigation';
import { getRequestConfig } from 'next-intl/server';

const locales = ['en', 'es'];

export default getRequestConfig(async ({ locale }) => {
  if (!locales.includes(locale as any)) notFound();

  return {
    messages: (await import(`../messages/${locale}.json`)).default
  };
});
```

### Página de Inicio

Usa las traducciones en la página de inicio:

src/app/[locale]/page.tsx

```tsx
import { useTranslations } from 'next-intl';

export default function Home() {
  const t = useTranslations('IndexPage');

  return (
    <div>
      <h1 className='text-4xl mb-4 font-semibold'>{t('title')}</h1>
      <p>{t('description')}</p>
    </div>
  );
}
```

### Contribuciones

Las contribuciones son bienvenidas. Si deseas contribuir, por favor sigue estos pasos:

1. Bifurca el repositorio.
2. Crea una nueva rama (git checkout -b feature/mejora).
3. Realiza tus cambios y realiza commits descriptivos (git commit -m 'Agrega nueva funcionalidad').
4. Envía tus cambios a tu repositorio (git push origin feature/mejora).
5. Abre una Pull Request en este repositorio.

### Licencia

Este proyecto está licenciado bajo la Licencia MIT. Consulta el archivo LICENSE para más detalles.

```r
Este `README.md` proporciona una guía clara y detallada sobre cómo instalar, configurar y usar el proyecto
```
